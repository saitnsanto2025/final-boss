<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Upload Images</title>
<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
  font-size: 18px;
  line-height: 1.6;
}
#result {
  margin-top: 20px;
  padding: 15px;
  border: 1px solid #ddd;
  display: none;
  font-size: 18px;
}
button {
  background-color: #6A0DAD; /* royal purple */
  color: white;
  border: none;
  padding: 12px 20px;
  font-size: 16px;
  border-radius: 6px;
  cursor: pointer;
}
button:hover {
  background-color: #4B0082;
}
a {
  color: #6A0DAD;
  font-weight: bold;
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}
#loading {
  display: none;
  margin-top: 15px;
  font-size: 18px;
  color: #6A0DAD;
}
</style>
</head>
<body>
<h2>Upload Images to n8n</h2>

<form id="uploadForm">
  <label for="file">Select images:</label><br><br>
  <input type="file" name="data" id="file" multiple required><br><br>
  <button type="submit">Upload</button>
</form>

<div id="loading">⏳ Uploading... please wait</div>
<div id="result"></div>

<script>
document.getElementById("uploadForm").addEventListener("submit", async function(e) {
  e.preventDefault();

  const form = e.target;
  const formData = new FormData(form);

  const loadingDiv = document.getElementById("loading");
  const resultDiv = document.getElementById("result");
  resultDiv.style.display = "none";
  loadingDiv.style.display = "block";

  try {
    const response = await fetch("https://l3j2qk3a.rcsrv.net/webhook/upload-images", {
      method: "POST",
      body: formData
    });

    const text = await response.text();
    loadingDiv.style.display = "none";
    resultDiv.style.display = "block";

    // split by line in case multiple links
    const links = text.split(/\s+/).filter(line => line.trim() !== "");

    if (links.length > 0) {
      resultDiv.innerHTML = "✅ Upload successful!<br>";
      links.forEach(link => {
        if (link.startsWith("http")) {
          resultDiv.innerHTML += `<a href="${link}" target="_blank">${link}</a><br>`;
        } else {
          resultDiv.innerHTML += `<pre>${link}</pre><br>`;
        }
      });
    } else {
      resultDiv.innerHTML = `<pre>${text}</pre>`;
    }
  } catch (err) {
    loadingDiv.style.display = "none";
    alert("Upload failed: " + err.message);
  }
});
</script>
</body>
</html>
